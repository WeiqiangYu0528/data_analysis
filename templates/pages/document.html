<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Temporal Graph Management System</title>
        <meta content="Admin Dashboard" name="description" />
        <meta content="ThemeDesign" name="author" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />


        <!-- morris css -->
        <link rel="stylesheet" href="../../static/plugins/morris/morris.css">
         <!-- ION Slider -->
        <link href="../../static/plugins/ion-rangeslider/css/ion.rangeSlider.css" rel="stylesheet" type="text/css"/>

        <link href="../../static/css/bootstrap.min.css" rel="stylesheet" type="text/css">
        <link href="../../static/css/icons.css" rel="stylesheet" type="text/css">
        <link href="../../static/css/style.css" rel="stylesheet" type="text/css">
        <link href="../../static/css/bootstrap-datepicker3.standalone.min.css" rel="stylesheet" type="text/css">
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

    </head>

    <body class="fixed-left">

        <!-- Loader -->
        <div id="preloader">
            <div id="status">
                <div class="spinner">
                    <div class="rect1"></div>
                    <div class="rect2"></div>
                    <div class="rect3"></div>
                    <div class="rect4"></div>
                    <div class="rect5"></div>
                </div>
            </div>
        </div>

        <!-- Begin page -->
        <div id="wrapper">

            <!-- ========== Left Sidebar Start ========== -->
                  {% include "pages/sidebar.html" %}
            <!-- Left Sidebar End -->

            <!-- Start right Content here -->

            <div class="content-page">
                <!-- Start content -->
                <div class="content">

                    <!-- Top Bar Start -->
                    {% include "pages/topbar.html" %}
                    <!-- Top Bar End -->

                    <div class="page-content-wrapper ">

                        <div class="container-fluid">

                            <div style="padding: 12px 0"></div>
                            <!-- end page title -->
                                     <div class="row">
                                          <div class="col-xl-6" >
                                    <div class="card">
                                        <div class="card-body">
                                            <h4 class="mt-0 header-title mb-4">Document file</h4>
                                            <div style='overflow:auto'>
                                            <table class="table table-striped mb-0" style='white-space: nowrap'>
                                                <tbody>
                                                    <tr>
                                                         <td>Name</td>
                                                         <td>{{ filename|slice:"-4"  }}</td>
                                                    </tr>
                                                    <tr>
                                                         <td>Type</td>
                                                         <td>{{ info.0 }}</td>
                                                    </tr>
                                                      <tr>
                                                            <td>Nodes</td>
                                                            <td>{{ info.1 }}</td>
                                                    </tr>
                                                      <tr>
                                                         <td>Temporal Edges</td>
                                                           <td>{{ info.2 }}</td>
                                                    </tr>
                                                      <tr>
                                                        <td>Edges in static graph</td>
                                                           <td>{{ info.3}}</td>
                                                    </tr>
                                                     <tr>
                                                        <td>Time span</td>
                                                          <td>{{ info.4 }}</td>
                                                    </tr>
                                                       <tr>
                                                        <td>Min Date</td>
                                                          <td>{{ details.0 }}</td>
                                                    </tr>
                                                       <tr>
                                                        <td>Max Date</td>
                                                          <td>{{ details.1 }}</td>
                                                    </tr>
                                                       <tr>
                                                        <td>Maximum degree</td>
                                                          <td>{{ details.2}}</td>
                                                    </tr>
                                                       <tr>
                                                        <td>Minimum degree</td>
                                                          <td>{{ details.3 }}</td>
                                                    </tr>
                                                       <tr>
                                                        <td>Average degree</td>
                                                          <td>{{ details.4 }}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Description</td>
                                                        <td>{{ details.5 }}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Download Link</td>
                                                        <td>
                                                            <a href="/download/{{ filename }}" class="btn btn-primary btn-sm"><i class="fas fa-download"></i></a>

                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                         </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xl-6">
                                    <div class="card">
                                        <div class="card-body">
                                            <h4 class="mt-0 header-title mb-4">{{ filename }}</h4>
                                            <div class="table-responsive">
                                                <table class="table table-hover">
                                                    <thead>
                                                        <tr>
                                                            <th scope="col">ID No.</th>
                                                            <th scope="col">SRC</th>
                                                            <th scope="col">DST</th>
                                                            <th scope="col">UNIXTS</th>
{#                                                            <th scope="col">Amount</th>#}
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                               {% for items in data_info %}
                                                            <tr>
                                                                <th scope="row">#{{ forloop.counter }}</th>
                                                            {% for item in items  %}
                                                              <td>{{ item }}</td>
                                                                {% endfor %}
                                                            </tr>
                                                          {% endfor %}
                                                    </tbody>
                                                </table>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>


                            <!-- end row -->

            
                            <div class="row">
                                <div class="col-xl-12">
                                    <div class="card">
                                        <div class="card-body">
                                             <div>
                                                 <button type="button" id="s1" class="btn btn-outline-primary waves-effect waves-light" style="display: inline-block;float:right;margin-right: 10px">Submit</button>
                                                 <div class="dropdown" style="display: inline-block;float:right;margin-right: 10px">
                                                        <button value="" class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="dropdownMenuButton3">
                                                            <i class="ti-settings mr-1"></i> Granularity
                                                        </button>
                                                        <div class="dropdown-menu dropdown-menu-right dropdown-menu-animated">
                                                            <button class="dropdown-item"  onclick="changeval(3,'A','Annual')">Annual</button>
                                                            <button class="dropdown-item"  onclick="changeval(3,'Q','Quarter')">Quarter</button>
                                                            <button class="dropdown-item"  onclick="changeval(3,'M','Month')">Month</button>
                                                        </div>
                                                    </div>
                                                 <div class="span5 col-md-4" id="sandbox-container1"  style="display: inline-block;float:right;">
                                                     <div class="input-daterange input-group" id="datepicker">
                                                    <span class="input-group-addon" style="width:60px">From</span>
                                                    <input type="text" class="input-sm form-control" name="start" id="f1" value="{{ dates.1 }}">
                                                    <span class="input-group-addon" style="width:50px">to</span>
                                                    <input type="text" class="input-sm form-control" name="end" id="t1" value="{{ dates.3 }}">
                                                     </div>
                                                 </div>
                                                </div>
                                            <h4 class="mt-0 header-title">Data Distribution</h4>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div id="graph" style="width: 1000px;margin-top: 20px;min-height:450px" >  {{fig|safe}}</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                               <div class="row">
                                <div class="col-xl-9">
                                    <div class="card">
                                        <div class="card-body">
                                                 <div style="margin-bottom: 50px">
                                                   <button type="button" id="s2" class="btn btn-outline-primary waves-effect waves-light" style="display: inline-block;float:right;margin-right: 10px">Submit</button>
                                                     <div class="span5 col-md-3" id="sandbox-container2" style="display: inline-block;float:right;">
                                                        <div class="input-group date">
                                                        <input type="text" class="form-control" id="d1" value="{{ dates.0 }}/{{ dates.1 }}"><span class="input-group-addon"><i class="mdi mdi-calendar"></i></span>
                                                        </div>
                                                    </div>
                                                 <div id="cd">
                                                      <div class="dropdown" style="display: inline-block;float:right;margin-right: 10px">
                                                        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="dropdownMenuButton4" value="l">
                                                             Methods
                                                        </button>
                                                        <div class="dropdown-menu dropdown-menu-right dropdown-menu-animated">
                                                                <button class="dropdown-item"  onclick="changeval(4,'l','Louvain');$('#kc').hide()">Louvain</button>
                                                                <button class="dropdown-item"  onclick="changeval(4,'o','OLCPM');$('#kc').show()">OLCPM</button>
                                                        </div>
                                                    </div>
                                                 </div>
                                                 <div id="cs">
                                                          <div class="form-group" style="padding: 0;margin-bottom:0">
                                                <div class="col-sm-2" style="display: inline-block;float:right;padding: 0">
                                                    <input class="form-control" type="number" value="9" id="query">
                                                </div>
                                                 <label for="example-number-input" class="col-s-2 col-form-label" style="display: inline-block;float:right;margin-right: 10px;font-size: 14px">Query Node</label>
                                                        </div>
                                                 </div>
                                                    <div class="dropdown" style="display: inline-block;float:right;margin-right: 10px" id="kc">
                                                             <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="dropdownMenuButton7">
                                                            K
                                                        </button>
                                                        <div class="dropdown-menu dropdown-menu-right dropdown-menu-animated">
                                                                      <button class="dropdown-item"   onclick="changeval(7,3,3)">3</button>
                                                                      <button class="dropdown-item"   onclick="changeval(7,4,4)">4</button>
                                                                      <button class="dropdown-item"   onclick="changeval(7,5,5)">5</button>
                                                                      <button class="dropdown-item"   onclick="changeval(7,6,6)">6</button>
                                                        </div>
                                                    </div>
                                                         <div class="dropdown" style="display: inline-block;float:right;margin-right: 10px">
                                                        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="dropdownMenuButton13" value="cd">
                                                             Community Detection
                                                        </button>
                                                        <div class="dropdown-menu dropdown-menu-right dropdown-menu-animated">
                                                                <button class="dropdown-item"  onclick="changeval(13,'cd','Community Detection');$('#cs').hide();$('#cd').show();$('#kc').hide()">Community Detection</button>
                                                                <button class="dropdown-item"  onclick="changeval(13,'cs','Community Search');$('#cd').hide();$('#cs').show();$('#kc').show()">Community Search</button>
                                                        </div>
                                                    </div>

                                                </div>
                                            <h4 class="mt-0 header-title">Force-Directed Graph</h4>
                                               <div id="force" style="min-height: 620px;min-width: 800px;"> </div>
                                              <div id="result"></div>
                                        </div>
                                    </div>
                                </div>
                                        <div class="col-xl-3">
                            <div class="card">
                                        <div class="card-body">
                                            <h4 class="mt-0 header-title mb-4">Community - <span id="size">{{ size }}</span></h4>
                                            <div class="latest-massage">
                                                 <div style="overflow: auto;height: 675px">
                                                        <div class="latest-message-list" id="coms">
                                                            {% for com in community %}
                                                    <div class="border-bottom position-relative" style="min-height: 50px">
                                                      <div class="float-left user mr-3">
                                                            <h5 class="bg-primary text-center rounded-circle text-white mt-0">c{{ forloop.counter }}</h5>
                                                        </div>
                                                        <div class="massage-desc">
                                                            <p class="text-muted">{{ com }}</p>
                                                        </div>
                                                    </div>
                                                            {% endfor %}
                                                </div>
                                              </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <!-- end row -->

            
                            <div class="row">
                                     <div class="col-xl-12">
                                    <div class="card">
                                        <div class="card-body">
                                   <div class="row">
                                     <div class="col-xl-3">
                                           <div class="dropdown" style="margin-bottom: 10px;">
                                                        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="dropdownMenuButton8">
                                                              Similarity Measure
                                                        </button>
                                                        <div class="dropdown-menu dropdown-menu-right dropdown-menu-animated">
                                                                <button class="dropdown-item"  onclick="changeval(8,'bc','BC coefficient');$('#sms').hide();">BC coefficient</button>
                                                                <button class="dropdown-item"  onclick="changeval(8,'js','JS divergence');$('#sms').hide();">JS divergence</button>
                                                                <button class="dropdown-item"  onclick="changeval(8,'vc','Vertex count');$('#sms').hide();">Vertex count</button>
                                                                <button class="dropdown-item"  onclick="changeval(8,'cs','Combine Similarities');$('#sms').show();">Combine Similarities</button>
                                                        </div>
                                                    </div>
                                           <div id="sms">
                                                     <div class="dropdown" style="margin-bottom: 10px;" >
                                                                    <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="dropdownMenuButton11">
                                                                          Similarity Measure 1
                                                                    </button>
                                                                    <div class="dropdown-menu dropdown-menu-right dropdown-menu-animated">
                                                                            <button class="dropdown-item"  onclick="changeval(11,'bc','BC coefficient')">BC coefficient</button>
                                                                            <button class="dropdown-item"  onclick="changeval(11,'js','JS divergence')">JS divergence</button>
                                                                            <button class="dropdown-item"  onclick="changeval(11,'vc','Vertex count')">Vertex count</button>
                                                                    </div>
                                                                </div>
                                                     <div class="dropdown" style="margin-bottom: 10px;" >
                                                                                <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="dropdownMenuButton12">
                                                                                      Similarity Measure 2
                                                                                </button>
                                                                                <div class="dropdown-menu dropdown-menu-right dropdown-menu-animated">
                                                                                        <button class="dropdown-item"  onclick="changeval(12,'bc','BC coefficient')">BC coefficient</button>
                                                                                        <button class="dropdown-item"  onclick="changeval(12,'js','JS divergence')">JS divergence</button>
                                                                                        <button class="dropdown-item"  onclick="changeval(12,'vc','Vertex count')">Vertex count</button>
                                                                                </div>
                                                                            </div>
                                                       <div class="row" style="margin: 30px auto;">
                                                          <div class="col-lg-12">
                                                              <div style="margin-bottom: 10px;">
                                                                    <span class="font-16 m-b-20 mt-0">Ratio 1: <span id="r1">0.5</span></span>
                                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                                    <span class="font-16 m-b-20 mt-0">Ratio 2: <span id="r2">0.5</span></span>
                                                              </div>
                                                                    <span id="ratio"></span>
                                                                    <input type="hidden" id="rval" value="0.2">
                                                            </div>
                                                        </div>
                                                        </div>
                                         <div id="datepicker2" data-date="/{{ dates.1 }}" style="margin-bottom: 20px; "></div>
                                            <input type="hidden" id="d2" value="{{ dates.1 }}">

                                           <button type="button" id="s3" class="btn btn-outline-primary waves-effect waves-light" style="margin-bottom: 30px;" >Submit</button>

                                        <div style="position: absolute;top: 1140px;">
                                            <div class="dropright" style="margin-bottom: 10px;" >
                                                                    <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="dropdownMenuButton1" value="d">
                                                                        Graph Operator
                                                                    </button>
                                                                    <div class="dropdown-menu dropdown-menu-right dropdown-menu-animated">
                                                                            <button class="dropdown-item"  onclick="changeval(1,'d','Diameter')">Diameter</button>
                                                                            <button class="dropdown-item"  onclick="changeval(1,'s','Average Shortest Path')">Average Shortest Path</button>
                                                                    </div>
                                             </div>
                                             <div class="row" style="margin: 30px auto;">
                                                          <div class="col-lg-12">
                                                              <div style="margin-bottom: 10px;">
                                                                    <span class="font-16 m-b-20 mt-0">Prediction Ratio: <span id="p1">0.2</span></span>
                                                              </div>
                                                                    <span id="ratio2"></span>
                                                                    <input type="hidden" id="pval" value="0.2">
                                                            </div>
                                                        </div>
                                       <button type="button" id="s4" class="btn btn-outline-primary waves-effect waves-light" style="margin-bottom: 30px;" >Submit</button>
                                        </div>

                                     </div>
                                         <div class="col-xl-9">
                                                        <h4 class="mt-0 header-title mb-4" style="margin-bottom: 0;">Heatmap</h4>
                                                        <div id="heatmap" style="min-height: 450px;" >  {{heatmap|safe}}</div>
                                                         <h4 class="mt-0 header-title mb-4" style="margin-bottom: 0;">Dataset Space</h4>
                                                        <div id="dataspace" style="min-height: 450px">  {{dataspace|safe}}</div>
                                                           <h4 class="mt-0 header-title mb-4" style="margin-bottom: 0;">Graph Operator Prediction</h4>
                                                        <div id="prediction" style="min-height: 450px">  {{prediction|safe}}</div>
                                                    </div>
                                                </div>
                                            </div>
                                            </div>
                                      </div>
                                <!-- end col -->
                            </div>
                            <!-- end row -->


                            <div class="row">
                                <div class="col-xl-12">
                                    <div class="card">
                                        <div class="card-body">
                                            <h4 class="mt-0 header-title">Total Communities</h4>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div>  {{total|safe}}</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                           <!-- end row -->

                        </div><!-- container fluid -->

                    </div> <!-- Page content Wrapper -->

                </div> <!-- content -->

{#                <footer class="footer">#}
{#                    © 2019 Zinzer <span class="d-none d-md-inline-block"> - Crafted with <i class="mdi mdi-heart text-danger"></i> by Themesdesign.</span>#}
{#                </footer>#}

            </div>
            <!-- End Right content here -->


        </div>

        <!-- END wrapper -->


        <!-- jQuery  -->
        <script src="../../static/js/jquery.min.js"></script>
        <script src="../../static/js/bootstrap.bundle.min.js"></script>
        <script src="../../static/js/modernizr.min.js"></script>
        <script src="../../static/js/detect.js"></script>
        <script src="../../static/js/fastclick.js"></script>
        <script src="../../static/js/jquery.slimscroll.js"></script>
        <script src="../../static/js/jquery.blockUI.js"></script>
        <script src="../../static/js/waves.js"></script>
        <script src="../../static/js/jquery.nicescroll.js"></script>
        <script src="../../static/js/jquery.scrollTo.min.js"></script>

         <script src="../../static/js/bootstrap-datepicker.min.js"></script>


        <!-- Range slider js -->
        <script src="../../static/plugins/ion-rangeslider/js/ion.rangeSlider.min.js"></script>
        <script src="../../static/pages/rangeslider-init.js"></script>

         <script>
     $('#sandbox-container1 .input-daterange').datepicker({
        format: "yyyy",
        startView: 2,
        minViewMode: 2,
        startDate: '{{ dates.1 }}}',
        endDate:'{{ dates.3 }}',
        defaultViewDate: { year: {{ dates.1 }},  },
        autoclose:true,
    });

    $('#sandbox-container2 .input-group.date').datepicker({
        format: "mm/yyyy",
        minViewMode: 1,
        startView: 2,
        maxViewMode: 2,
        startDate: '{{ dates.0 }}/{{ dates.1 }}',
        endDate:'{{ dates.2 }}/{{ dates.3 }}',
        autoclose:true,
    });

    $('#datepicker2').datepicker({
        format: "yyyy",
        minViewMode: 2,
        startDate: '{{ dates.1 }}',
        endDate:'{{ dates.3 }}',
        multidate:2,
    });
    $('#datepicker2').on('changeDate', function() {
        $('#d2').val(
            $('#datepicker2').datepicker('getFormattedDate')
        );
    });
        </script>

        <script>
            $("#ratio").ionRangeSlider({
                skin: "round",
                grid: true,
                min: 0,
                max: 1,
                from: 0.5,
                step: 0.1,
                grid_snap: true,
                onChange:(data)=>{
                    $('#rval').val(data.from_pretty)
                    $('#r1').html(data.from_pretty)
                    $('#r2').html((1-data.from_pretty).toFixed(1))

                }
    });
              $("#ratio2").ionRangeSlider({
                skin: "round",
                grid: true,
                min: 0,
                max: 1,
                from: 0.2,
                step: 0.1,
                grid_snap: true,
                onChange:(data)=>{
                    $('#pval').val(data.from_pretty)
                    $('#p1').html(data.from_pretty)
                }
    });

        </script>



        <script>
            let changeval=(num,val,text)=>{
                let parentE="#dropdownMenuButton"+num;
                $(parentE).val(val);
                $(parentE).text(text);
            }
            $('#kc').hide()
            $('#sms').hide();
            $('#cs').hide();
        </script>


              <script>
       $("#s1").click(function () {
      let tg = $("#dropdownMenuButton3").val();
      if(tg===""){
          tg="A"
      }
      let from=$("#f1").val();
      if(from===""){
          from = {{ dates.1 }}
      }
      let to=$("#t1").val();
       if(to===""){
          to = {{ dates.3 }};
      }
      if(from>to){
          alert("Wrong")
      }else {
          $.ajax({
              url: '/type/',
              data: {
                  'tg': tg,
                  'fn': "{{filename}}",
                  'from': from,
                  'to': to
              },
              type: "GET",
              dataType: 'json',
              beforeSend: ()=> {
               $("#graph").html('<div><div class="spinner-grow text-primary" role="status" style="width: 10rem;height: 10rem;position: absolute; left: 65%; top: 30%;">'+
                '<span class="sr-only" >Loading...</span></div></div>')
                },
              success: function (data) {
                  if (data) {
                      $("#graph").html(data.fig)
                  }
              }
          });
      }
    });

    </script>

        <script>
     $("#s2").click(function () {
     let tool= $("#dropdownMenuButton13").val();
     let method=$("#dropdownMenuButton4").val();
      let date=$("#d1").val();
      let size=$("#dropdownMenuButton7").val();
      let v=$('#query').val();
       if(tool==='cs'){
          method="cs"
       }
       if(size===""){
          size = 3
      }
      $.ajax({
          url: '/graph/',
          data: {
              "method":method,
              'k': size,
              'fn': "{{filename}}",
              'date':date,
              'v': v
          },
          type: "GET",
          dataType: 'json',
          beforeSend: ()=> {
                   $("#force").html('<div><div class="spinner-grow text-primary" role="status" style="width: 10rem;height: 10rem;position: absolute; left: 40%; top: 40%;">'+
                              '<span class="sr-only" >Loading...</span></div></div>')
                },
          success: function (data) {
              if(data.error){
                  $("#force").html('<div style="text-align: center;position: relative;top: 280px;" ><h4>'+
                              data.message+'</h4></div>')
                   $("#coms").html("")
                  $("#size").html(0)

              }
              else{
                  let coms=""
                  $.each(data.coms, (inx,val)=>{coms=coms+('<div class="border-bottom position-relative" style="min-height: 50px"><div class="float-left user mr-3"><h5 class="bg-primary text-center rounded-circle text-white mt-0">c'+(inx+1)+'</h5>' +
                  '</div><div class="massage-desc"><p class="text-muted">'+
                      val+'</p></div></div>')});
                  $("#coms").html(coms);
                  $("#size").html(data.size)
                   drawd3(""+data.nodes,""+data.links,data.method)
              }
          }
      });
});

</script>

         <script>
  heatmap=""
  $("#s3").click(function () {
  let sm=$("#dropdownMenuButton8").val();
  let time=$("#d2").val();
  let m1=$("#dropdownMenuButton11").val();
  let m2=$("#dropdownMenuButton12").val();
  let r=$("#rval").val();
  fr= time
  to_=time
  if(time.length>4){
      let frto=time.split(',');
      fr=Math.min(...frto);
      to_=Math.max(...frto);
  }
   if(sm===""){
       sm="bc"
   }
   if(sm==="cs" ){
        if(m1==="" || m2==="" ){
       alert("Please choose the Similarity Measures")
            return
   }
        if(m1===m2){
            alert("Please choose two different similarity measures")
            return
        }
   }
      $.ajax({
          url: '/apollo/',
          data: {
              'sm': sm,
              'fn': "{{filename}}",
              'from': fr,
              'to': to_,
              'm1':m1,
              'm2':m2,
              'r':r,
          },
          type: "GET",
          dataType: 'json',
          beforeSend: ()=> {
                         $("#heatmap").html('<div><div class="spinner-grow text-primary" role="status" style="width: 10rem;height: 10rem;position: absolute; left: 45%; top: 12%;">'+
                              '<span class="sr-only" >Loading...</span></div></div>')
                         $("#dataspace").html('<div><div class="spinner-grow text-primary" role="status" style="width: 10rem;height: 10rem;position: absolute; left: 45%; top: 40%;">'+
                                      '<span class="sr-only" >Loading...</span></div></div>')

                },
          success: function (data) {
              if (data) {
                  $("#heatmap").html(data.heatmap)
                  $("#dataspace").html(data.space)
                  heatmap=JSON.stringify(data.info)
              }
          }
      });
});

</script>


<script>
      $("#s4").click(function () {
  let p=$("#pval").val();
  let operator=$("#dropdownMenuButton1").val();
  if(heatmap===""){
     alert("Please Generate the Similarity Matrix First")
     return
  }
  $.ajax({
            url:'/prediction/',
            type:'POST',
            data:{
                      'fn':"{{filename}}",
                      'o':operator,
                      'p':p,
                      'info':heatmap,
                      'from':fr,
                       'to':to_
            },
            dataType:'json',
            beforeSend:function(){
                   $("#prediction").html('<div><div class="spinner-grow text-primary" role="status" style="width: 10rem;height: 10rem;position: absolute; left: 45%; top: 78%;">'+
                              '<span class="sr-only" >Loading...</span></div></div>')
            },
            success:function(result){
                  $("#prediction").html(result.prediction)
            },
        })
});
</script>

         <script src="https://d3js.org/d3.v4.min.js"></script>
                 <script src="../../static/js/func.js"></script>
    <script>
       drawd3("{{ nodes }}","{{ links }}",'cd');
       $(".datepicker-inline").css({'border':0,'padding':0});
    </script>
        <!-- dashboard js -->
        <!-- App js -->
        <script src="../../static/js/app.js"></script>
    </body>
</html>




